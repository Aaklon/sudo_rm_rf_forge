{"ast":null,"code":"import { collection, doc, getDocs, addDoc, onSnapshot, serverTimestamp } from 'firebase/firestore';\nimport { db } from './firebase/config';\nclass SeatService {\n  // Initialize 50 seats\n  async initializeSeats() {\n    try {\n      const seatsRef = collection(db, 'seats');\n\n      // Check if seats already exist\n      const snapshot = await getDocs(seatsRef);\n      if (!snapshot.empty) {\n        console.log('Seats already initialized');\n        return;\n      }\n\n      // Create 50 seats\n      const seatTypes = ['standard', 'stand', 'pod'];\n      const promises = [];\n      for (let i = 1; i <= 50; i++) {\n        const type = i <= 35 ? 'standard' : i <= 43 ? 'stand' : 'pod';\n        promises.push(addDoc(seatsRef, {\n          id: `S-${String(i).padStart(3, '0')}`,\n          type,\n          status: 'available',\n          floor: i <= 25 ? 1 : 2,\n          currentBooking: null,\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp()\n        }));\n      }\n      await Promise.all(promises);\n      console.log('Successfully initialized 50 seats');\n    } catch (error) {\n      console.error('Error initializing seats:', error);\n      throw error;\n    }\n  }\n\n  // Get all seats\n  async getSeats() {\n    try {\n      const snapshot = await getDocs(collection(db, 'seats'));\n      return snapshot.docs.map(doc => ({\n        firestoreId: doc.id,\n        ...doc.data()\n      }));\n    } catch (error) {\n      console.error('Error fetching seats:', error);\n      throw error;\n    }\n  }\n\n  // Listen to real-time seat updates\n  listenToSeats(callback) {\n    try {\n      const unsubscribe = onSnapshot(collection(db, 'seats'), snapshot => {\n        const seats = snapshot.docs.map(doc => ({\n          firestoreId: doc.id,\n          ...doc.data()\n        }));\n        callback(seats);\n      }, error => {\n        console.error('Error listening to seats:', error);\n      });\n      return unsubscribe;\n    } catch (error) {\n      console.error('Error setting up seat listener:', error);\n      throw error;\n    }\n  }\n}\nexport default new SeatService();","map":{"version":3,"names":["collection","doc","getDocs","addDoc","onSnapshot","serverTimestamp","db","SeatService","initializeSeats","seatsRef","snapshot","empty","console","log","seatTypes","promises","i","type","push","id","String","padStart","status","floor","currentBooking","createdAt","updatedAt","Promise","all","error","getSeats","docs","map","firestoreId","data","listenToSeats","callback","unsubscribe","seats"],"sources":["C:/Users/karan/Downloads/files/src/services/seatService.js"],"sourcesContent":["import {\n  collection,\n  doc,\n  getDocs,\n  addDoc,\n  onSnapshot,\n  serverTimestamp\n} from 'firebase/firestore';\nimport { db } from './firebase/config';\n\nclass SeatService {\n  // Initialize 50 seats\n  async initializeSeats() {\n    try {\n      const seatsRef = collection(db, 'seats');\n      \n      // Check if seats already exist\n      const snapshot = await getDocs(seatsRef);\n      if (!snapshot.empty) {\n        console.log('Seats already initialized');\n        return;\n      }\n\n      // Create 50 seats\n      const seatTypes = ['standard', 'stand', 'pod'];\n      const promises = [];\n\n      for (let i = 1; i <= 50; i++) {\n        const type = i <= 35 ? 'standard' : i <= 43 ? 'stand' : 'pod';\n        \n        promises.push(\n          addDoc(seatsRef, {\n            id: `S-${String(i).padStart(3, '0')}`,\n            type,\n            status: 'available',\n            floor: i <= 25 ? 1 : 2,\n            currentBooking: null,\n            createdAt: serverTimestamp(),\n            updatedAt: serverTimestamp()\n          })\n        );\n      }\n\n      await Promise.all(promises);\n      console.log('Successfully initialized 50 seats');\n    } catch (error) {\n      console.error('Error initializing seats:', error);\n      throw error;\n    }\n  }\n\n  // Get all seats\n  async getSeats() {\n    try {\n      const snapshot = await getDocs(collection(db, 'seats'));\n      return snapshot.docs.map(doc => ({\n        firestoreId: doc.id,\n        ...doc.data()\n      }));\n    } catch (error) {\n      console.error('Error fetching seats:', error);\n      throw error;\n    }\n  }\n\n  // Listen to real-time seat updates\n  listenToSeats(callback) {\n    try {\n      const unsubscribe = onSnapshot(\n        collection(db, 'seats'),\n        (snapshot) => {\n          const seats = snapshot.docs.map(doc => ({\n            firestoreId: doc.id,\n            ...doc.data()\n          }));\n          callback(seats);\n        },\n        (error) => {\n          console.error('Error listening to seats:', error);\n        }\n      );\n\n      return unsubscribe;\n    } catch (error) {\n      console.error('Error setting up seat listener:', error);\n      throw error;\n    }\n  }\n}\n\nexport default new SeatService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}